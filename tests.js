// Generated by LiveScript 1.4.0
(function(){
  var Backbone, h, _, abstractman, ubigraph;
  Backbone = require('backbone4000');
  h = require('helpers');
  _ = require('underscore');
  abstractman = require('./index');
  ubigraph = require('ubigraph');
  exports.basic = function(test){
    var data, SM, sm;
    data = {};
    SM = abstractman.StateMachine.extend4000({
      state: 'init',
      states: {
        init: {
          children: {
            A: true,
            B: true
          },
          visit: function(){
            data.initVisit = true;
            return this.changeState('A');
          },
          leave: function(){
            return data.initLeave = true;
          }
        },
        A: {
          children: {
            B: true
          },
          visit: function(){
            data.Avisit = true;
            return this.changeState('B');
          },
          leave: function(){
            return data.Aleave = true;
          }
        },
        B: {
          visit: function(){
            test.deepEqual(data, {
              initVisit: true,
              initLeave: true,
              Avisit: true,
              Aleave: true
            });
            return test.done();
          }
        }
      }
    });
    sm = new SM();
    return sm.on('changestate', function(newStateName, oldStateName){
      return console.log('changestate', oldStateName, '->', newStateName);
    });
  };
}).call(this);
